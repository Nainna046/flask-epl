{% extends 'layout.html' %}

{% block title %}
  EPL
{% endblock %}

{% block content %}
<div class="container mt-3">
  <h2>EPL</h2>
  <hr>

  <div class="row">
    <!-- ðŸ”¥ Add Player -->
    <div class="col">
      <a href="{{ url_for('main.new_player') }}"
         class="btn btn-outline-success">
        <i class="bi bi-folder-plus"></i>
        Add New Player
      </a>
    </div>

    <!-- ðŸ” Search -->
    <div class="col">
      <form method="post"
            hx-target="#result"
            hx-trigger="submit"
            hx-post="{{ url_for('main.all_players') }}"
            hx-on::after-request="if(event.detail.successful) this.reset()">
        <div class="input-group mb-3">
          <input name="player_name"
                 type="text"
                 class="form-control"
                 placeholder="Search by Player's name">
          <button class="btn btn-outline-secondary" type="submit">
            <i class="bi bi-search"></i>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ðŸ“‹ Table -->
  <table class="table table-hover mt-3">
    <thead>
      <tr>
        <th>#</th>
        <th>Player Name</th>
        <th>Action</th>
      </tr>
    </thead>

    <tbody id="result">
      {% for player in players %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ player.name }}</td>
        <td>
          <a href="{{ url_for('main.info_player', id=player.id) }}"
             class="btn btn-outline-info btn-sm">
            <i class="bi bi-info-circle"></i>
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
